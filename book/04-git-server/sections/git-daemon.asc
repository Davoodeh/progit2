=== دیمن گیت

(((serving repositories, پروتکل گیت)))

حالا با استفاده از پروتگل ‍«Git» می‌خواهیم سرویس‌دهنده دیمن مخازن را نصب و ران‌اندازی کنیم.
این انتخاب بسیار معمول و سریع است، دسترسی تصدیق هویت نشده به اطلاعات گیت خودتان.
یادتان باشد که این یک سرویس تصدیق هویت شده نیست، هر کاری بر پایه این پروتکل انجام‌ دهید در شبکه، عمومی است.

اگر این پروتکل را خارج از فایروال خود بر روی سرور اجرا کنید، فقط قابل استفاده برای پروژه‌هایی است که به صورت عمومی برای تمام
جهان قابل مشاهده است.
اگر سروری که با آن سروکار دارید درون فایروالتان است، احتما شاید از آن برای پروژه‌های که تعداد کثیری از مردم یا کامپیوترها
فقط دسترسی خواندن به آن دارند استفاده می‌کنید و در زمانی که نخواهید به هر کدام یک کلید SSH دهید.

در هر صورت نصب و راه‌اندازی پروتکل گیت بسیار ساده است.
اصولا، لازم است تا از این دستور استفاده شود که اسکرپیت در پشت صحنه اجرا شود:(((git commands, daemon)))

[source,console]
----
$ git daemon --reuseaddr --base-path=/srv/git/ /srv/git/
----

آپشن `reuseaddr--` به سرور امکان دوباره اجرا شدن را می‌دهد؛ بدون اینکه لازم باشد تا اتصالات قدیمی قطع شوند، همچنین آپشن `base-path--`
به مردم اجازه می‌دهد تا بدون وارد کردن مسیر ورودی پروژه را کلون کنند و مسیر در آخر به دیمن گیت خواهد گفت در کجا به دنبال مخازن برای
خروجی گرفتن بگردد.
اگر فایروال دارید، نیازدارید که تا راهی بر روی پرت ۹۴۱۸ باز کنید.

با توجه به سیستم‌عاملی که از آن استفاده می‌کنید، شما چندین راه برای برای اجرای این فراید به صورت پشت صحنه یا دیمنایز شده دارید.

از آنجایی که `systemd` یکی از معمول ترین سیستم‌ اولیه در بین توزیع‌های مدرن لینوکسی است،‌ می‌توانید از ان برای این کار استفاده کنید.
به راحتی فایلی را با محتوای زیر در `etc/systemd/systemm/git-daemon.service/` جایگزاری کنید:

[source,console]
----
[Unit]
Description=Start Git Daemon

[Service]
ExecStart=/usr/bin/git daemon --reuseaddr --base-path=/srv/git/ /srv/git/

Restart=always
RestartSec=500ms

StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=git-daemon

User=git
Group=git

[Install]
WantedBy=multi-user.target
----

شاید لازم باشد توجه داشته باشید که دیمن گیت در همینجا با دستور `git` هم برای کابر و هم گروه کاربر در دسترس است.
آن را با توجه به نیاز خود اصلاح کنید و مطمئن شوید که کاربر نام برده در سیستم وجود دارد.
همچنین، بررسی کنید تاباینری گیت در مسیر `usr/bin/git/` وجود دارد و اگر لازم است مسیرش را تغییر دهید.

در آخر، دستور `systemctl enable git-daemon` را اجرا کنید تا این سرویس به صورت اتوماتیک در موقع بوت سیستم نیز اجرا شود،
و می‌توانید این سرویس را با دستور `systemctl start git-daemon` و `systemct stop git-daemon` اجرا یا متوقف کنید.

بعد، باید به گیت بگویید که برای کدام مخازن اجازه دسترسی بدون تصدیق هویت وجود دارد.
شما می‌توانید این کار را برای هر مخزن با ساخت یک فایل به نام `git-daemon-export-ok` انجام دهید.

[source,console]
----
$ cd /path/to/project.git
$ touch git-daemon-export-ok
----
حضور آن فایل به گیت می‌گوید که مشکلی برای پذیرش این پروژه بدون تصدیق هویت وجود ندارد.
